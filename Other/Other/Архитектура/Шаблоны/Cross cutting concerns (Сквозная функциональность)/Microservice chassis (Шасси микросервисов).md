# Microservice chassis (Шасси микросервисов)

### Проблема

Как команда может быстро создать и настроить поддерживаемую кодовую базу для готового к производству сервиса, чтобы начать разработку его бизнес-логики?

Сервис должен поддерживать множество функций:

- отправку показателей;
- отправку отчетов об исключениях;
- ведение журнала;
- проверку работоспособности;
- работу с внешней конфигурацией;
- безопасность;
- отвечает за своё обнаружение;
- реализация предохранителей.

Вряд ли вам захочется подготавливать все это с нуля при создании каждого нового сервиса, ведь это может занять дни, а то и недели.

### Решение

Создание сервисов на основе фреймворка или набора фреймворков, которые реализуют такие общие функции, как отслеживание исключений, ведение журнала, проверка работоспособности, работа с внешней конфигурацией и распределённая трассировка.

Чтобы значительно ускорить этот процесс, сервисы можно разрабатывать поверх микросервисных шасси. *Шасси микросервисов* — это фреймворк или набор фреймворков, которые берут на себя перечисленные обязанности. Для реализации всех этих функций от вас не требуется почти (или даже совсем) никакого кода.

![Untitled](Microservice%20chassis%20(%D0%A8%D0%B0%D1%81%D1%81%D0%B8%20%D0%BC%D0%B8%D0%BA%D1%80%D0%BE%D1%81%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D0%BE%D0%B2)/Untitled.png)

Шасси микросервисов — это фреймворк или набор фреймворков, которые берут на себя многочисленные обязанности, включая следующие:

- конфигурацию, вынесенную вовне;
- проверку работоспособности;
- показатели приложения;
- обнаружение сервисов;
- предохранители;
- распределенную трассировку.

Это может значительно уменьшить объем кода, который вам необходимо напи­сать, или даже свести его к нулю. Вам нужно лишь адаптировать микросервисное шасси под свои требования. Это позволяет сосредоточиться на разработке бизнес-логики сервисов.

В качестве микросервисного шасси приложение FTGO использует фрейм­ворки Spring Boot и Spring Cloud. Spring Boot предоставляет такие функции, как поддержка внешней конфигурации. Spring Cloud реализует шаблоны наподобие предохранителя и обнаружения сервисов на стороне клиента. Помимо Spring Boot и Spring Cloud, есть и другие фреймворки микросервисных шасси. Например,

- Java
    - [Spring Boot](http://projects.spring.io/spring-boot/) and [Spring Cloud](http://cloud.spring.io/)
    - [Dropwizard](https://dropwizard.github.io/)
- Go
    - [Gizmo](http://open.blogs.nytimes.com/2015/12/17/introducing-gizmo/?_r=2)
    - [Micro](https://github.com/micro)
    - [Go kit](https://github.com/go-kit/kit)

Многие функции микросервисного шасси, скорее всего, уже реализованы на уровне инфраструктуры. Например, многие среды развертывания занимаются обнаружением сервисов. Более того, многие сетевые возможности микросервисных шасси уже реализованы в виде сети сервисов (внешнего инфраструктурного слоя).

[**Service mesh (Сеть сервисов**)](../Deployment%20(%D0%A0%D0%B0%D0%B7%D0%B2%D0%B5%D1%80%D1%82%D1%8B%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D1%81%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D0%BE%D0%B2)/Service%20mesh%20(%D0%A1%D0%B5%D1%82%D1%8C%20%D1%81%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D0%BE%D0%B2).md)

Паттерн [Service Template](https://microservices.io/patterns/service-template.html) (Шаблон сервиса) является родственным паттерном - шаблон сервиса, который разработчики могут скопировать для создания нового приложения. Это либо альтернатива шаблону Microservice Chassis, либо он использует Microservice Chassis и просто содержит код и конфигурацию, которым не место в шасси.

### Преимущества

- Поддерживать зависимости, логику сборки и логику сквозных функций в актуальном состоянии быстрее и проще. Вы просто выпускаете новую версию фреймворка микросервисного шасси, содержащую необходимые изменения, и обновляете каждый сервис до новой версии.

### Недостатки

- вам нужно иметь микросервисное шасси для каждого языка программирования/фреймворка, который вы хотите использовать. Это может стать препятствием для перехода на новый язык программирования или фреймворк. Нужно будет подбирать отдельное шасси для каждой комбинации языка/платформы, которую вы используете в раз­работке сервисов.