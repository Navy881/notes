# Transaction log tailing (Отслеживание тразакционного журнала)

### Проблема

Как опубликовать сообщения/события из таблицы OUTBOX в базе данных в брокер сообщений?

### Решение

Менее тривиальное решение заключается в том, что ретранслятор *отслеживает* транзакционный журнал базы данных, который называют еще журналом фиксации. Каждое зафиксированное обновление, выполненное приложением, представлено
в виде записи в журнале транзакций БД. Вы можете прочитать этот журнал и опубликовать каждое изменение в качестве сообщения для брокера.

*Анализатор журнала транзакций* читает записи в транзакционном журнале. Каждую подходящую запись, которая соответствует добавлению сообщения, он преобразует в событие и публикует его для брокера. Этот подход годится для публи­кации сообщений, записанных в таблицу СУБД или добавленных в список записей в базе данных NoSQL.

![Untitled](Transaction%20log%20tailing%20(%D0%9E%D1%82%D1%81%D0%BB%D0%B5%D0%B6%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D1%82%D1%80%D0%B0%D0%B7%D0%B0%D0%BA%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%BE/Untitled.png)

Существует несколько примеров реализации этого подхода:

- *Debezium* (debezium.io);
- *LinkedIn Databus* (github.com/linkedin/databus);
- *DynamoDB streams* (docs.aws.amazon.com/amazondynamodb/latest/developerguide/Streams.html);
- *Eventuate Tram* (github.com/eventuate-tram/eventuate-tram-core).

### Недостатки

- реализация требует от разработчиков некоторых усилий. Вы могли бы, к примеру, написать низкоуровневый код для вызова API баз данных. Или, как вариант, воспользоваться открытым фреймворком, таким как Debezium, который публикует в Apache Kafka изменения, вносимые приложением в MySQL, Postgres или MongoDB.